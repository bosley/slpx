{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "SLPX",
  "scopeName": "source.slpx",
  "patterns": [
    { "include": "#comments" },
    { "include": "#strings" },
    { "include": "#numbers" },
    { "include": "#type-annotations" },
    { "include": "#special-variables" },
    { "include": "#core-keywords" },
    { "include": "#bits-functions" },
    { "include": "#fs-functions" },
    { "include": "#host-functions" },
    { "include": "#io-functions" },
    { "include": "#list-functions" },
    { "include": "#numbers-functions" },
    { "include": "#reflection-functions" },
    { "include": "#str-functions" },
    { "include": "#constants" },
    { "include": "#punctuation" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.semicolon.slpx",
          "match": ";.*$"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.slpx",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.slpx",
              "match": "\\\\."
            }
          ]
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.float.slpx",
          "match": "\\b-?[0-9]+\\.[0-9]+\\b"
        },
        {
          "name": "constant.numeric.integer.slpx",
          "match": "\\b-?[0-9]+\\b"
        }
      ]
    },
    "type-annotations": {
      "patterns": [
        {
          "name": "storage.type.slpx",
          "match": ":[_QLESIRXF*](?=\\s|\\)|\\(|$)"
        }
      ]
    },
    "special-variables": {
      "patterns": [
        {
          "name": "variable.language.slpx",
          "match": "\\$(?:error|args)\\b"
        },
        {
          "name": "constant.language.slpx",
          "match": "\\b_\\b"
        }
      ]
    },
    "core-keywords": {
      "patterns": [
        {
          "name": "keyword.control.slpx",
          "match": "\\b(?:set|fn|if|do|try|match|use|exit|drop|qu|uq|putln)\\b"
        }
      ]
    },
    "bits-functions": {
      "patterns": [
        {
          "name": "support.function.bits.slpx",
          "match": "\\b(?:bits/explode|bits/int|bits/real)(?=\\s|\\)|\\(|$)"
        }
      ]
    },
    "fs-functions": {
      "patterns": [
        {
          "name": "support.function.fs.slpx",
          "match": "\\b(?:fs/exists\\?|fs/dir\\?|fs/file\\?|fs/read_file|fs/write_file|fs/append_file|fs/rm_file|fs/mk_dir|fs/mk_dir_all|fs/rm_dir|fs/rm_dir_all|fs/list_dir|fs/working_dir|fs/set_working_dir)(?=\\s|\\)|\\(|$)"
        }
      ]
    },
    "host-functions": {
      "patterns": [
        {
          "name": "support.function.host.slpx",
          "match": "\\b(?:host/env/get|host/env/set|host/dir/home|host/dir/config|host/dir/temp|host/dir/cache|host/os|host/hw/mem/total|host/hw/mem/available|host/hw/mem/used|host/hw/mem/percent|host/hw/disk/total|host/hw/disk/used|host/hw/disk/percent|host/hw/cpu/percent|host/hw/cpu/count|host/hw/cpu/percent/at|host/hw/cpu/model/at|host/hw/cpu/mhz/at|host/hw/cpu/cache/at)(?=\\s|\\)|\\(|$)"
        }
      ]
    },
    "io-functions": {
      "patterns": [
        {
          "name": "support.function.io.slpx",
          "match": "\\b(?:io/out|io/out/set_precision|io/flush|io/in|io/in/int|io/in/real|io/color/fg|io/color/bg|io/color/reset)(?=\\s|\\)|\\(|$)"
        }
      ]
    },
    "list-functions": {
      "patterns": [
        {
          "name": "support.function.list.slpx",
          "match": "\\b(?:list/new|list/len|list/clear|list/empty|list/get|list/set|list/first|list/last|list/push|list/pop|list/fill|list/reverse|list/contains|list/index|list/subset|list/slice|list/concat|list/join|list/iter|list/map|list/filter|list/reduce)(?=\\s|\\)|\\(|$)"
        }
      ]
    },
    "numbers-functions": {
      "patterns": [
        {
          "name": "support.function.numbers.slpx",
          "match": "\\b(?:int/add|int/sub|int/mul|int/div|int/mod|int/pow|int/sum|int/real|int/eq|int/gt|int/gte|int/lt|int/lte|int/rand|int/abs|real/add|real/sub|real/mul|real/div|real/pow|real/sum|real/int|real/eq|real/gt|real/gte|real/lt|real/lte|real/rand|real/sqrt|real/exp|real/log|real/ceil|real/round|real/is-nan|real/is-inf|real/is-finite|real/abs)(?=\\s|\\)|\\(|$)"
        }
      ]
    },
    "reflection-functions": {
      "patterns": [
        {
          "name": "support.function.reflection.slpx",
          "match": "\\b(?:reflect/type\\?|reflect/equal\\?|reflect/int\\?|reflect/real\\?|reflect/str\\?|reflect/list\\?|reflect/fn\\?|reflect/none\\?|reflect/error\\?|reflect/some\\?|reflect/ident\\?)(?=\\s|\\)|\\(|$)"
        }
      ]
    },
    "str-functions": {
      "patterns": [
        {
          "name": "support.function.str.slpx",
          "match": "\\b(?:str/eq|str/len|str/clear|str/from|str/int|str/real|str/list|str/concat|str/upper|str/lower|str/trim|str/contains|str/index|str/slice|str/split|str/replace|str/precision)(?=\\s|\\)|\\(|$)"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "constant.language.boolean.slpx",
          "match": "\\b[01]\\b"
        }
      ]
    },
    "punctuation": {
      "patterns": [
        {
          "name": "punctuation.section.parens.slpx",
          "match": "[()]"
        },
        {
          "name": "punctuation.section.brackets.slpx",
          "match": "[\\[\\]]"
        },
        {
          "name": "keyword.operator.quote.slpx",
          "match": "'"
        },
        {
          "name": "keyword.operator.error.slpx",
          "match": "@"
        }
      ]
    }
  }
}

